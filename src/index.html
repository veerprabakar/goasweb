<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Go as WASM</title>
  <script src="./public/wasm_exec.js"></script>
  <script>
    const go = new Go();

    let mod, inst;

    WebAssembly.instantiateStreaming(fetch("./public/main.wasm"), go.importObject).then(
      result => {
        mod = result.module;
        inst = result.instance;
        go.run(inst);
      }
    );

    function calc(op) {
      let v1 = Number(document.getElementById("val1").value);
      let v2 = Number(document.getElementById("val2").value);

      if(op === '+') {  
        let result = add(v1, v2);
      } else if (op === '-') {
        let result = sub(v1, v2);
      } else if (op === '*') {
        let result = mul(v1, v2);
      } else if (op === '/') {
        let result = div(v1, v2);
      }
    }
  </script>

</head>
<body>
  <h1>Go as WASM</h1>
  <h2>Calc sample</h2>
  <input type="text" id="val1" />
  <input type="text" id="val2" />

  <br />
  <br />
  <button onClick="calc('+');">+</button>
  <button onClick="calc('-');">-</button>
  <button onClick="calc('*');">*</button>
  <button onClick="calc('/');">/</button>
  
</body>
</html>
